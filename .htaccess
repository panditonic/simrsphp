RewriteEngine on

<IfModule mod_rewrite.c>

  # Redirect /users ke /modules/users/index.php
  RewriteRule ^users?$ users/index.php [L]

  # 1) Redirect any “.php” URL to the extension-less URL
  #    e.g. /foo.php  →  /foo
  RewriteCond %{THE_REQUEST} \s/([^.]+)\.php[?\s] [NC]
  RewriteRule ^ %1 [R=301,L]

  # 2) Internally rewrite extension-less requests to “.php” files
  #    e.g. /foo  →  /foo.php
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME}\.php -f
  RewriteRule ^([^.]+)$ $1.php [L]
</IfModule>